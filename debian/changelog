eblob (0.21.43) unstable; urgency=low

  * timeout: again fixed eblob_event_wait() for negative timeouts

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 08 Jul 2014 00:16:47 +0400

eblob (0.21.42) unstable; urgency=low

  * timeout: set eblob wait timeout to unsigned long, so that it would be converted to large number for negative tiemouts

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 05 Jul 2014 19:51:27 +0400

eblob (0.21.41) unstable; urgency=low

  * eblob: fixed long eblob stopping time. Patch by Pavel Jurkas from wialus.co.nz
  * cpp: added plain_write() method, which is a wrapper on top of eblob_plain_write()
  * example: get rid of unused regex iterator, it used old iterator code, which did not take into account ext headers for example
  * iterate: updated iterators - exported new iterator similar to what is present in C code, get rid of old iterator class
  * log: made eblob_dump_id_len() and friends thread-safe by using per-thread allocated temporal buffers

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 19 Jun 2014 20:17:24 +0400

eblob (0.21.40) unstable; urgency=low

  * warning fixed, ssize_t replaced with int
  * stat: detailed monitoring in write_commit_nolock() added
  * blob: reserve 2 blob sizes - this is needed for sorting - split+merge
  * Fixed garbage in csum-time.
  * Added logging eblob_write_commit_footer with csum-time

 -- Andrey Kashin <kashin.andrej@gmail.com>  Sat, 17 May 2014 13:03:00 +0400

eblob (0.21.39) unstable; urgency=low

  * defrag: added start/completion time and status statistics
  * eblob: added 'defrag' prefix for all defrag/sort related log prints

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 13 May 2014 23:01:18 +0400

eblob (0.21.38) unstable; urgency=low

  * Removed looking up for key twice on write.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 01 May 2014 06:29:55 +0400

eblob (0.21.37) unstable; urgency=low

  * debian: react version dependency updated to 2.3.1
  * debian: react-dbg removed from dependencies

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 29 Apr 2014 23:49:43 +0400

eblob (0.21.36) unstable; urgency=low

  * debian: react added to dependencies to eblob and eblob-dbg
  * foreign: React version updated
  * stat: REMOVED_SIZE stat estimation fixed
  * eblob: added comment about eblob_ram_control::size field
  * stat: Total size of removed records added

 -- Andrey Kashin <kashin.andrej@gmail.com>  Mon, 28 Apr 2014 16:47:03 +0400

eblob (0.21.35) unstable; urgency=low

  * iterator: do not throw exception if there are no more data files to iterate

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 23 Apr 2014 18:54:54 +0400

eblob (0.21.34) unstable; urgency=low

  * Added defragmentation methods to cpp binding.
  * Added defragmentation methods to python binding.
  * Fixed eblob bases which end by slash

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 22 Apr 2014 14:58:33 +0400

eblob (0.21.33) unstable; urgency=low

  * cmake: missing locate_library.cmake added
  * build: fixed build when react is not in standard packaged place
  * build: depend on react developer version for compilation

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 05 Apr 2014 02:05:50 +0400

eblob (0.21.32) unstable; urgency=low

  * foreign: React is now shared library
  * stat: Tools for exporting trace_id from elliptics added

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 01 Apr 2014 23:37:40 +0400

eblob (0.21.31) unstable; urgency=low

  * stat: use atomics instead of locks
  * stat: IO stats merged into global eblob stats
  * stat: Json statistics. React C bindings.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 12 Mar 2014 00:21:40 +0400

eblob (0.21.30) unstable; urgency=low

  * stat: Time statistics monitoring added.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 17 Feb 2014 23:45:59 +0400

eblob (0.21.29) unstable; urgency=low

  * merge: spelling correction
  * Added measurement of the time spent reading and checking object checksum
  * Typo fixed

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 11 Feb 2014 05:04:05 +0400

eblob (0.21.28) unstable; urgency=low

  * periodic: update stat file once per 30 seconds, do not trash disks every secon
  * spec: removed sitelib glob

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 02 Dec 2013 04:49:10 +0400

eblob (0.21.27) unstable; urgency=low

  * eblob: get rid of basically unused recover_index_from_blob.py
  * python: get rid of old and unsupported python helper

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 17 Nov 2013 23:04:19 +0400

eblob (0.21.26) unstable; urgency=low

  * stat: export stat ids, added eblob_stat_get_summary() to read statistics by id

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 17 Nov 2013 22:50:27 +0400

eblob (0.21.25) unstable; urgency=low

  * defrag: Fixed accumulation of bases which comes out the limits

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 11 Nov 2013 23:31:14 +0400

eblob (0.21.24) unstable; urgency=low

  * merge: allow to merge really old blobs whose indexes always contain 96 as disk_size

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 08 Nov 2013 22:38:56 +0400

eblob (0.21.23) unstable; urgency=low

  * license: use eblob is now under LGPLv3
  * gitignore: update
  * defrag: eblob should delete/unlink blob files containg only removed entries as soon as it detects them

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 07 Nov 2013 23:16:51 +0400

eblob (0.21.22) unstable; urgency=low

  * eblob_base_remove() must not remove base ctl from base list, since it will be updated during defragmentation and thus will be lost

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 21 Oct 2013 23:25:08 +0400

eblob (0.21.21) unstable; urgency=low

  * Physically delete blobs where all records were already removed.
  * Added ability to pass offset to eblob_preallocate

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 21 Oct 2013 22:10:08 +0400

eblob (0.21.20) unstable; urgency=low

  * man: reformatted examples
  * man: dos2unix
  * blob: fix return value in case of eblob_preallocate failure
  * Added eblob tool man pages

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 27 Sep 2013 22:29:24 +0400

eblob (0.21.19) unstable; urgency=low

  * Use eblob_preallocate() instead of ftruncate(), since the latter may fail to preallocate needed space on disk, and thus mmap() may fail/crash

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 24 Sep 2013 20:47:20 +0400

eblob (0.21.18) unstable; urgency=low

  * defrag_percentage is a part of total number of record, not 'accessible' ones
  * defrag: mark bctls for defrag based on number of records and size
  * Simplify eblob_regex_iter

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 15 Sep 2013 22:57:53 +0400

eblob (0.21.17) unstable; urgency=low

  * data-sort: add time-scheduled data-sort

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 02 Sep 2013 19:13:53 +0400

eblob (0.21.16) unstable; urgency=low

  * blob: we shouldn't ignore index corruption on iteration
  * blob: skip size check on possibly zero-filled records
  * examples: merge: allow missed -o if -d is specified
  * codespell: committed->commited

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 30 Aug 2013 19:16:16 +0400

eblob (0.21.15) unstable; urgency=low

  * blob: improved log message on lockf() failure
  * examples: merge: fixed spelling, improved wording
  * examples: merge: do not truncate output files on dry run
  * examples: merge: add -d to getopt
  * Added 'dry-run' mode in eblob_merge

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 28 Aug 2013 20:12:55 +0400

eblob (0.21.14) unstable; urgency=low

  * blob: added sanity to record copy
  * examples: merge: make errors more obvoius
  * examples: merge: prettify usage
  * examples: merge: check that open succeeded
  * examples: merge: less strict header ckecking
  * examples: merge: fixed formatting of error message

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 23 Aug 2013 06:06:03 +0400

eblob (0.21.13) unstable; urgency=low

  * stats: simplified stats naming
  * stats: accounting for in-memory index size
  * hash: keep track of replaced entries
  * hash: check rwlock_init return code
  * hash: reduce memory consumption by 10%
  * hash: simplify hash entry add
  * stats: improved stats naming
  * blob: moved mutex init to separate function
  * examples: merge: skip broken entries

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 20 Aug 2013 22:54:24 +0400

eblob (0.21.12) unstable; urgency=low

  * examples: merge: remove useless while condition
  * examples: merge: check results of read/write
  * examples: merge: introduce -m parameter for max record size
  * examples: merge: added even more sanity checks
  * examples: merge: check both header for equality

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 20 Aug 2013 04:14:37 +0400

eblob (0.21.11) unstable; urgency=low

  * recover_index_from_blob.py: Fixed it in various places now it manages to recover index from data file. Not fast though;
  * recover_index_from_blob.py: Allow bases to be passed through command line;
  * recover_index_from_blob.py: Improvements to logging.
  * blob.py: Removed check for data header vs index header equality;
  * blob.py: Fixed infinite loop on iteration over broken bases;
  * blob.py: Fixed iteration over removed entries;
  * blob.py: Removed commented code;
  * blob.py: Reformatted code and added comments;

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 19 Aug 2013 04:49:47 +0400

eblob (0.21.10) unstable; urgency=low

  * Now eblob_merge recovers from errors in the middle of base;
  * Improved log output. Now it can be grep'd efficiently;
  * Fixed error messages formatting.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 15 Aug 2013 05:02:14 +0400

eblob (0.21.9) unstable; urgency=low

  * examples: make eblob_merge more robust
  *   This will allow eblob_merge to recover badly damaged bases

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 15 Aug 2013 04:29:49 +0400

eblob (0.21.8) unstable; urgency=low

  * blob: fixed sanity check
  * blob: fixed possible zero-size allocs
  * blob: propagate internal iterator errors to caller
  * data-sort: remove redundant code
  * blob: move reord check routines to separate function
  * index: check index validity on start
  * blob: be less strict about index corruptions
  * blob: fix eblob_total_elements()
  * index: set pointers to NULL in eblob_index_blocks_destroy()
  * index: fix possible stat race
  * stress: check second's eblob_init() result
  * mobjects: fix eblob_index_blocks_fill()'s rc check
  * index: explicitly return 0 on success
  * mobjects: make sorted index mandatory if it exists.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 14 Aug 2013 04:38:06 +0400

eblob (0.21.7) unstable; urgency=low

  * blob: do not commit to ram until eblob_writev_raw is finished

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 06 Aug 2013 12:09:57 +0400

eblob (0.21.6) unstable; urgency=low

  * On defrag split all blobs into sub-groups so they stay within limits imposed by eblob cfg blob_size and records_in_blob and merge each group into one blob
  * Removed unused code from logging
  * Minor bugfixes for data-sort

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 02 Aug 2013 00:30:52 +0400

eblob (0.21.5) unstable; urgency=low

  * blob: improve log mesage on lock fail
  * bloom: added loop count to stats
  * bloom: improve bloom filter hit rate

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 30 Jul 2013 12:48:52 +0400

eblob (0.21.4) unstable; urgency=low

  * blob: removed binlog
  * blob: make all bases but one immutable
  * binlog: added tiny binlog replacement
  * blob: lock bctl on entry removal
  * blob: added note about rollback on failure
  * blob: use b->lock for b->bases access
  * index: do not consider just sorted base an error
  * index: whitespace cleanup
  * index: improved logging
  * index: fix race between data-sort and index lookup
  * tests: stress: make tests multithreaded
  * tests: stress: more defensive programming
  * tests: stress: cleanup previous test on start
  * log: remove race in eblob_dump_id_len()
  * cmake: use gnu99 standard
  * log: simplified logging
  * blob: switch from GNU99 [0] array to C99 []
  * tests: stress: fail fast on invalid arguments
  * tests: stress: align items_num on threads_num boundary
  * tests: stress: bump test version
  * tests: stress: print test version on start
  * blob: use 0xhex format for flags
  * codespell: comment fixes
  * log: introduce new log level SPAM
  * log: removed double 'endl' in log msg
  * log: less verbose logging
  * mobjects: fixed return code after base creation fail
  * mobjects: hint unsorted fd too
  * defrag: fixed race between defrag and base addition
  * data-sort: fixed assignment before check
  * blob: explicitly fix aliasing problems
  * cmake: do not link with dl in case of *SAN
  * cmake: removed unneeded BSD bits
  * mobjects: sort includes
  * cmake: removed useless if
  * cmake: apply some warnings to C-specific code
  * blob: fix multistage write for immutable blobs
  * blob: improved logging in multi-stage write
  * blob: fix copying of old record on prepare
  * tests: stress: return EX_USAGE on positional arguments
  * ci: added overwrite-heavy test with many threads
  * blob: manually extend blob if copy was requested
  * blob: copy seems-to-be-empty records
  * data-sort: hold backend lock on binlog start
  * blob: blob that are not sorting right now can be mutable

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 29 Jul 2013 17:12:21 +0400

eblob (0.21.3) unstable; urgency=low

  * blob: threat 0-sized entry as non-existient on append with EXTHDR
  * Fixed llu/off_t format warnings

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 22 Jul 2013 16:43:57 +0400

eblob (0.21.2) unstable; urgency=low

  * Use 141 boost
  * Tests update
  * blob: prealloc space on append
  * blob: fix append of non-exisient entries with EXTHDR
  * doc: replaced ioremap references with reverbrain
  * stats: added forgotten include
  * defrag: added even more sanity

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 10 Jul 2013 20:15:21 +0400

eblob (0.21.1) unstable; urgency=low

  * Use 153 boost in spec

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 09 Jul 2013 20:57:14 +0400

eblob (0.21.0) unstable; urgency=low

  * Replaced general purpose BLOB_DISK_CTL_USR1 flag with special BLOB_DISK_CTL_EXTHDR
  *   which changes eblob behavior in various ways so that metadata management in elliptics can be implemented efficiently
  * Fixed writev() behaviour for iovcnt > 1
  * Tests improvements: added writev() tests, improved append and three stage write
  * Proper cleanup of bases which are removed due to absence of entries
  * Many statistics fixes
  * Comment and logging improvements
  * Various static analyzer/pedantic fixes

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 04 Jul 2013 22:46:14 +0400

eblob (0.20.0) unstable; urgency=low

  * Removed columns
  * Heavily rewritten API - made it vectorized
  * Removed useless compression
  * Extended statistics
  * Changed overwrite mode - 'closed' blobs can never be overwritten, 'open' blob (current, the last one) is always overwritten

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 24 Jun 2013 02:37:53 +0400

eblob (0.19.11) unstable; urgency=low

  * data-sort: added leak note
  * blob: added periodic comments
  * mobjects: protect against malloc size overflow
  * blob: do not place want_defrag in register
  * blob: loff_t is used only in __linux__ code
  * blob: do not place ctl->thread_num in register
  * blob: do not depend on dirname implementation
  * stats: it's fine to use asserts in internal functions
  * stats: atomically set sort_status
  * l2hash: do not depend on rb_node being first structure member
  * hash: fix eblob_hash_exit()
  * Fixed new base duplicated name leak

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 06 Jun 2013 14:17:51 +0400

eblob (0.19.10) unstable; urgency=low

  * Lock database on start using lockf() to prevent multiple libeblob instances from using same database simultaneously;
  * Introduce new periodic thread for various background tasks;
  * Move statistics updates to periodic thread. This almost fully removes statistics update from write path.
  *   Also stats update is now atomic - it creates temp file, writes data to it and then uses rename();
  * Move heavy statvfs(3) call to periodic thread. This removes around 5-7 system calls (depending on libc implementation)
  *   and speeds up write microbenchmarks by factor of two;
  * Improved locking in iterator. Previously each following iterator could re-mmap
  *   data used by already running iterator. Now we hold bctl for duration of one batch of dcs
  *   preventing another thread by remmaping data underneath it;
  * Now that we have working locks - allow iterator to proceed along with data-sort;
  * Removed old defrag parts for good;
  * Misc bugfixes and formatting / comment / CI improvements.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 01 Jun 2013 15:53:59 +0400

eblob (0.19.9) unstable; urgency=low

  * blob: allow to commit no more data than was written
  * blob: do not overwrite flags in eblob_plain_write()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 23 May 2013 17:57:15 +0400

eblob (0.19.8) unstable; urgency=low

  * blob: re-formatted eblob_write_prepare_disk()
  * blob: re-formatted log message
  * bloom: do not set bits for removed entries
  * Debug. Cleanup.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 21 May 2013 00:30:01 +0400

eblob (0.19.7) unstable; urgency=low

  * Revert temporal revets: adaptive mutexes and new bloom-filter design

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 15 May 2013 19:44:50 +0400

eblob (0.19.6) unstable; urgency=low

  * features: remove include hack for Mac OS X / FreeBSD
  * blob: do not read data file on fill()
  * More debug on notice log level

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 15 May 2013 19:17:17 +0400

eblob (0.19.4-1) unstable; urgency=low

  * Revert "blob: switched to adaptive mutexes when available"
  * More debug on notice log level

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 12 May 2013 03:52:17 +0400

eblob (0.19.4) unstable; urgency=low

  * Revert "bloom: reworked bloom filter"

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 09 May 2013 01:12:10 +0400

eblob (0.19.3) unstable; urgency=low

  * Search eblobs on disk in reverse order.
  *   There is a theory that users prefer recently uploaded files, so it is better to search blobs in reverse order

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 06 May 2013 20:42:18 +0400

eblob (0.19.2) unstable; urgency=low

  * Propagate error from iterator callback to calling routine.
  *   This will fix various assert on data-sort if badly damaged blob file is provided.
  * Do not left garbage on FS if creating new blob failed.
  *   This bug can be triggered by setting low open files limit.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 30 Apr 2013 02:04:58 +0400

eblob (0.19.1) unstable; urgency=low

  * Do not hold lock while doing fsync
  * Codespell grammar nazzi
  * Debian package build-depends prettifications

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 25 Apr 2013 01:42:57 +0400

eblob (0.19.0) unstable; urgency=low

  * bloom: reworked bloom filter
  * bloom: optimize bloom computation
  * data-sort: actualize comments
  * bloom: replace djb with K&R hash
  * data-sort: skip sort stage for already sorted bases
  * api: added eblob_read_data_nocsum() public API
  * bloom: added (probably) usefull notes
  * stat: added notes about atomicity of update
  * index: allocate index blocks in contious region
  * stress: missing whitespace in help
  * stress: change default sync to -1
  * cpp: add ability to read w/o checksumming
  * Merge branch 'master' into devel

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 22 Apr 2013 23:43:10 +0400

eblob (0.18.6) unstable; urgency=low

  * blob: improved error reporting
  * blob: check return code of malloc
  * mobjects: simplified eblob_rename_blob
  * mobjects: check return code of rename
  * data-sort: fixed memory leak in datasort_mkdtemp()
  * blob: removed experimental EBLOB_DROP_PAGE_CACHE flag
  * blob: switched to adaptive mutexes when available
  * stat: speedup statistics update
  * misc: move includes to the top to unhide include errors
  * blob: improved logging in eblob_try_flush_page_cache()
  * blob: fix location of eblob_try_flush_page_cache()
  * blob: fixed error handling in eblob_fd_readlink()
  * blob: fixed build under Mac OS X

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 20 Apr 2013 00:37:47 +0400

eblob (0.18.5-1) unstable; urgency=low

  * Another attempt to friendify massive write and random reads

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 03 Apr 2013 21:03:09 +0400

eblob (0.18.5) unstable; urgency=low

  * Fixed copying of eblob_write_control to data at eblob_write

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 03 Apr 2013 19:16:03 +0400

eblob (0.18.4-1) unstable; urgency=low

  * Only flush page cache once per eblob_page_cache_flush_counter_max operations.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 01 Apr 2013 21:03:16 +0400

eblob (0.18.4) unstable; urgency=low

  * Added optional flag, which tries to free page cache on every read/write. Useful for random read with background (active) write.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 01 Apr 2013 18:03:20 +0400

eblob (0.18.3) unstable; urgency=low

  * bindings: python: fix class/struct mismatch
  * tests: stress: added block size parameter
  * fixed malformed write with EBLOB_NO_FOOTER flag at the end of the blob
  * blob: properly handle offset writes when cfg.bsize is set
  * mobjects: do not lock hash in common case
  * Added defrag status checker function
  * Return -EALREADY when defrag already started and client requests is again.
  * Log when level == eblob->log_level, not only when level is lower than enabled in eblob.
  * rwlock: hash->root_lock is now rwlock
  * l2hash: removed unused l2hash lock
  * blob: reformatted _eblob_read_ll() log
  * blob: more checks to eblob_csum_ok()
  * api: protect against misuse via zeroing out wc
  * api: replaced hacky eblob_read_flags() with eblob_read_return()
  * api: add new API to public interface
  * api: simplified eblob_read_ll()
  * api: basic protection for eblob_read_ll()
  * api: renamed eblob_read_nolock() to eblob_read_ll()
  * api: added new write* API
  * api: added flag BLOB_DISK_CTL_USR1

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 27 Mar 2013 13:42:51 +0400

eblob (0.18.2) unstable; urgency=low

  * blob: fix truncation of malformed blobs
  * blob: fix error code check
  * updated tests
  * comments
  * fixed setup.py
  * misc cleanups

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 13 Feb 2013 17:03:33 +0400

eblob (0.18.1) unstable; urgency=low

  * Data sort fixes

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 28 Jan 2013 19:21:16 +0400

eblob (0.18.0) unstable; urgency=low

  * Sort data blobs when doing defragmentation
  * A lot of changes for above task made by Alexey Ivanov <SaveTheRbtz@GMail.com>
  * Fixed lookup leak

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 26 Jan 2013 18:20:29 +0400

eblob (0.17.8) unstable; urgency=low

  * data-sort: fixed checkpatch errors
  * mobjects: simplified eblob_pagecache_hint()
  * data-sort: move eblob_pagecache_hint to mobjects.c
  * data-sort: remove useless fields from ram control
  * data-sort: l2hash: always set bctl pointer

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 16 Dec 2012 23:39:14 +0400

eblob (0.17.7) unstable; urgency=low

  * blob: added blob_size_limit config value to explicitly limit bob size
  * index: blob: add config variables for index block and bloom
  * blob: copy entry regardless of flags if offset is set
  * tests update

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 13 Dec 2012 21:26:21 +0400

eblob (0.17.6) unstable; urgency=low

  * l2hash: fix remove_all when l2hash is used
  * tests: also test eblob_remove_all()
  * blob: do not hold hash lock whole duration of eblob_remove_all
  * tests: use random offset in writes
  * examples: merge: added debug information from data blob along with index
  * l2hash: protect realloc with b->l2hash_lock
  * mobjects: do not leak malloc'ed path
  * mobjects: pass only valid fd to close()
  * l2hash: destroy on cleanup
  * range: removed dead assignments
  * mobjects: removed dead assignment
  * index: make static analyzer happy
  * tests: randomize types
  * l2hash: auto extend l2hash array on insert
  * l2hash: added safeguards for l2hash
  * l2hash: create all types 'in-between' on realloc

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 10 Dec 2012 18:33:38 +0400

eblob (0.17.5) unstable; urgency=low

  * l2hash: move eblob_realloc_l2hash() to common eblob_realloc_base_type()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 04 Dec 2012 17:56:09 +0400

eblob (0.17.4) unstable; urgency=low

  * added datasort tests
  * l2hash: Added level two hashing support
  * index: fix search_end pointing outside of mmapped area
  * index: fixed segfault in index

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 03 Dec 2012 14:15:29 +0400

eblob (0.17.3) unstable; urgency=low

  * Fixed range iterator and keys found in RAM for supposed-to-be-sorted blobs
  * Added google groups link
  * added missing eblob_iterate_existing prototype
  * added lost libboost-system-dev build-dep
  * Use autogenerated major/minor eblob versions.
  * add debug to eblob_init for eblob_stat_init errors
  * move features to separate file - features.h
  * added -W option notes
  * -W and -Wextra is the same thing
  * added -fno-strict-aliasing notes
  * blob: added eblob_pagecache_hint()
  * added posix_fadvise test
  * move definition of EBADFD to blob.h
  * blob: sizeof(char) is 1
  * Added timespamps to test
  * Link eblob and eblob_static with Boost_SYSTEM_LIBRARIES
  * Additional info for Boost on build
  * also look for boost system
  * replace fdopendir with opendir
  * mac os x build fixes
  * fixed misstype in merge.cpp

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 14 Nov 2012 19:51:18 +0400

eblob (0.17.2) unstable; urgency=low

  * fxd depends generation
  * Use small-lettered cmake functions
  * Added python support
  * Added rpath into binaries
  * Spec update
  * Move snappy into global build dep
  * When linking eblob_regex_iter do not use all boost libs, but only needed

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 06 Sep 2012 18:05:09 +0400

eblob (0.17.1) unstable; urgency=low

  * Fixed 1000-records defragmentation limit
  * Use bulk read in iterator

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 20 Aug 2012 19:04:49 +0400

eblob (0.17.0) unstable; urgency=low

  * Moved to log levels from log masks

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 19 Aug 2012 16:17:22 +0400

eblob (0.16.11) unstable; urgency=low

  * Turn off timed defrag
  * Get rid of stdint, it exists everywhere
  * Moved to cmake from autoconf. Courtesy to Vsevolod Velichko <torkvema@gmail.com>

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 18 Aug 2012 17:07:25 +0400

eblob (0.16.10) unstable; urgency=low

  * Added possibility to start defragmentation on demand

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 08 Aug 2012 12:05:03 +0400

eblob (0.16.9) unstable; urgency=low

  * Only allow names which are in form of '-.' without suffixes
  * Do not return header data in python eblob iterator
  * Misc cleanup
  * Do not compile example/iterate_send.cpp
  * Speedup eblob start using bulk index read

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 03 Aug 2012 23:56:29 +0400

eblob (0.16.8) unstable; urgency=low

  * Check if file is really opened in iterator.cpp

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 05 Jul 2012 17:31:21 +0400

eblob (0.16.7) unstable; urgency=low

  * Fix removed flags in indexes

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 02 Jul 2012 20:03:06 +0400

eblob (0.16.6) unstable; urgency=low

  * Use boost::iostreams::file_source instead of
    boost::iostreams::mapped_file, since the latter leaks
  * Added iterator program which sends data to elliptics

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 25 Jun 2012 20:13:13 +0400

eblob (0.16.5) unstable; urgency=low

  * Dep builds update

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 25 Jun 2012 18:19:13 +0400

eblob (0.16.4) unstable; urgency=low

  * Use libsnappy1 or snappy

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 18 Jun 2012 14:19:13 +0400

eblob (0.16.3) unstable; urgency=low

  * Use libsnappy1 instead of snappy

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 18 Jun 2012 14:12:13 +0400

eblob (0.16.2) unstable; urgency=low

  * Added flag which prevents free-space check during write

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 18 Jun 2012 11:56:13 +0400

eblob (0.16.1) unstable; urgency=low

  * Enable defragmentation

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 9 Jun 2012 17:56:13 +0400

eblob (0.16.0) unstable; urgency=low

  * Use ioremap::eblob namespace

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 7 Jun 2012 23:49:13 +0400

eblob (0.15.10) unstable; urgency=low

  * Fixed build on Ubuntu 12.04 Presice

 -- Anton Kortunov <toshic@yandex-team.ru>  Thu, 17 May 2012 15:11:04 +0400

eblob (0.15.9) unstable; urgency=low

  * Write 'removed' record in ->prepare(), so it can not be read in parallel. commit() will set correct bit. eblob_write() will do it too.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 28 Apr 2012 01:19:13 +0400

eblob (0.15.8) unstable; urgency=low

  * Use correct F_SETFD/FD_CLOEXEC

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 27 Apr 2012 20:58:13 +0400

eblob (0.15.7) unstable; urgency=low

  * added O_CLOEXEC flags
  * Do not return -ENOSPACE when EBLOB_RESERVE_10_PERCENTS is set and size is less than blob-size, but more than 0.1 of total size

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 27 Apr 2012 00:30:13 +0400

eblob (0.15.6) unstable; urgency=low

  * disable defrag for now

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 18 Apr 2012 00:18:13 +0400

eblob (0.15.5) unstable; urgency=low

  * Index and data files should be 644 by default to allow others like nginx to read data
  * Build deps update

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 17 Apr 2012 21:05:13 +0400

eblob (0.15.4) unstable; urgency=low

  * Do not sync in separate thread if sync interfal is zero - we will sync on every write anyway
  * Added no-footer blob flag
  * Added overwrite-commits flags
  * Removed posix_fallocate() call
  * Added hole detection
  * eblob_py_iterator cleanup
  * Drop macroses which are not accessible in centos
  * Do not include blob.h into namespace

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 6 Apr 2012 00:30:13 +0400

eblob (0.15.3) unstable; urgency=low

  * Only reserve 10% of free space when EBLOB_RESERVE_10_PERCENTS blob-config-flag is set
  * Added prepare/commit methods to cpp bindings
  * Unify blob names - rename existing if found
  * Generate bloom filter in case of generation sorted index during startup
  * Use sleep_time-- instead of --sleep_time to honor 1 second timeouts
  * Sync iteration must be protected by b->lock

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 23 Mar 2012 16:02:13 +0400

eblob (0.15.2) unstable; urgency=low

  * Fixed read-modify-write column update
  * Fixed missed column during type remove
  * Use correct python path
  * Added eblob::truncate()
  * Protect bctl->sort update - fixed defragmentation race
  * If user does not provide config->log then use stdout logger in cpp binding
  * Added eblob.py setup.py extra dist files

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 19 Mar 2012 00:53:13 +0400

eblob (0.15.1) unstable; urgency=low

  * Fixed leaks
  * Rename defragmented blobs just after they are created
  * Include cleanups
  * Do not use openat()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 11 Mar 2012 21:04:13 +0400

eblob (0.15.0) unstable; urgency=low

  * Added 'automatic' test/check tool
  * New automatic defragmentation implementation
  * Added ::key() method
  * Drop iolocks

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 29 Feb 2012 22:06:13 +0400

eblob (0.14.4) unstable; urgency=low

  * Added raw python blob class
  * eblob_remove_all(): when RAM lookup fails check disk
  * Deleted eblob_gen_index.cpp

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 19 Feb 2012 00:11:13 +0400

eblob (0.14.3) unstable; urgency=low

  * Added python eblob constructor that accepts eblob_config structure on input

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 16 Feb 2012 22:45:13 +0400

eblob (0.14.2) unstable; urgency=low

  * Use allocate/read for checksum calculation when reading small objects
  * Skip .tmp files when scanning base names

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 8 Feb 2012 22:54:13 +0400

eblob (0.14.1) unstable; urgency=low

  * Added start/num parameters to iterate over selected number of blobs.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 1 Feb 2012 00:55:13 +0400

eblob (0.13.13) unstable; urgency=low

  * Use ssize_t instead of int in eblob_copy_data()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 30 Jan 2012 18:33:13 +0400

eblob (0.13.12) unstable; urgency=low

  * Use chunked splice/copy, since we may have really big objects written

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 29 Jan 2012 21:33:13 +0400

eblob (0.13.11) unstable; urgency=low

  * Allow to rollback preallocation if prepare fails

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 29 Jan 2012 06:03:13 +0400

eblob (0.13.10) unstable; urgency=low

  * Merge helpers and fixes

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 29 Jan 2012 03:00:13 +0400

eblob (0.13.9) unstable; urgency=low

  * If we are doing prepare, and there is some old data - reserve 2 times as much as requested

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 20 Dec 2011 01:12:13 +0400

eblob (0.13.8) unstable; urgency=low

  * Added free space check before trying to reserve space on disk
  * Truncate stat file precisely to the number of bytes written
  * Fixed cached keys removal

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 20 Dec 2011 01:12:13 +0400

eblob (0.13.7) unstable; urgency=low

  * Added actual index size checks.
  * Update index early in eblob_write_prepare_disk().
  * eblob_write() does not need full eblob_write_commit_nolock(), only low-level on-disk part.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 19 Dec 2011 04:36:13 +0400

eblob (0.13.6) unstable; urgency=low

  * Fixed cache entry stall list head processing 

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 18 Dec 2011 16:53:13 +0400

eblob (0.13.5) unstable; urgency=low

  * Fixed cache entry removal

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 18 Dec 2011 05:02:13 +0400

eblob (0.13.4) unstable; urgency=low

  * If commit provides size, use it as object size. If prepare reuses existing region, do not change its sizes.
  * Changed eblob_write_prepare() first to try to check existing region if it is big enough.
 
 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 17 Dec 2011 23:54:13 +0400

eblob (0.13.3) unstable; urgency=low

  * Initialize allocated memory for ecache to 0

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 17 Dec 2011 06:54:13 +0400

eblob (0.13.2) unstable; urgency=low

  * Optimize prepare (for eblob_write_prepare() only) call to reuse existing prepared area if its size is big enough

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 17 Dec 2011 05:41:13 +0400

eblob (0.13.1) unstable; urgency=low

  * Fixed cache balancing

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 15 Dec 2011 22:02:13 +0400

eblob (0.13.0) unstable; urgency=low

  * Added configurable two-queue cache for read data by Anton Kortunov <toshic.toshic@gmail.com>

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 15 Dec 2011 22:00:13 +0400

eblob (0.12.23) unstable; urgency=low

  * Added eblob_read_nocsum() - read data without csum check

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 2 Dec 2011 22:00:13 +0400

eblob (0.12.22) unstable; urgency=low

  * Added eblob_csum_ok() - runtime csum read check

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 26 Nov 2011 15:59:13 +0400

eblob (0.12.21) unstable; urgency=low

  * Skip malformed zero entries during iteration
  * eblob_fill_write_control_from_ram() should not check whether aligned size is enough when doing read command

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Nov 2011 23:05:43 +0400

eblob (0.12.20) unstable; urgency=low

  * Initialize eblob_write_control to zeroes in eblob_plain_write()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 23 Nov 2011 23:36:57 +0400

eblob (0.12.19) unstable; urgency=low

  * Multiple prepare/commit fixes for POHMELFS. Better write debug.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 19 Nov 2011 01:18:35 +0400

eblob (0.12.18) unstable; urgency=low

  * Added array of IO locks to protect state update during IO
  * Simplified eblob_write()
  * Dropped openssl bits

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 14 Nov 2011 16:17:20 +0400

eblob (0.12.17) unstable; urgency=low

  * Fill in-memory rbtree and bloom filter for online generated sorted index
  * Do not update in-memory structures before pwrite
  * Added eblob_get_types function

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 31 Oct 2011 22:02:21 +0400

eblob (0.12.16) unstable; urgency=low

  * Don't compare flags in bsearch callback

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 25 Oct 2011 21:16:23 +0400

eblob (0.12.15) unstable; urgency=low

  * Do not open index and data files again in eblob_iterate
  * Update unsorted indexes of removed records with BLOB_DISK_CTL_REMOVE flag
  * Use 50 millions of records in blob by default
  * Added eblob_merge (instead of old eblob_defrag) which defragments and
    merges (multiple) blobs into larger one

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 24 Oct 2011 18:31:03 +0400

eblob (0.12.14) unstable; urgency=low

  * Added bsearch statistics and on-disk lookup debugs
  * Use 40 indexes per range block. Use 128 bits per index for bloom.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 19 Oct 2011 20:51:23 +0400

eblob (0.12.13) unstable; urgency=low

  * Fixed sorted index bsearch range calculation

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 18 Oct 2011 18:41:25 +0400

eblob (0.12.12) unstable; urgency=low

  * Added bloom filter in sorted index blocks
  * Added tree for range index search

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 15 Oct 2011 05:36:21 +0400

eblob (0.12.11) unstable; urgency=low

  * Only read mapped data blob if EBLOB_ITERATE_FLAGS_ALL flag is set

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 12 Oct 2011 00:51:56 +0400

eblob (0.12.10) unstable; urgency=low

  * Returned offline defrag tool
  * Drop libssl deps
  * Check if record is removed in blob

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 11 Oct 2011 01:22:10 +0400

eblob (0.12.9) unstable; urgency=low

  * spec update
  * rename eblob.spec
  * use bz2 archive

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 03 Oct 2011 20:48:53 +0400

eblob (0.12.8) unstable; urgency=low

  * Use internal ctl iterator when truncating last record
  * Added initial data offset shift into eblob gen

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 30 Sep 2011 19:31:15 +0400

eblob (0.12.7) unstable; urgency=low

  * Fixed error checking in eblob_base_remove
  * Call iteration callback for old blobs when EBLOB_ITERATE_FLAGS_ALL is set

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 28 Sep 2011 19:16:14 +0400

eblob (0.12.6) unstable; urgency=low

  * If we have old entry, mark it removed always, not only when flag is set.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 27 Sep 2011 15:51:14 +0400

eblob (0.12.5) unstable; urgency=low

  * Added overwrite eblob flag
  * Only copy/splice old data into new chunk when append/overwrite flag is set

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 27 Sep 2011 01:03:47 +0400

eblob (0.12.4) unstable; urgency=low

  * Made eblob_gen_index embed-only

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 23 Sep 2011 18:07:21 +0400

eblob (0.12.3) unstable; urgency=low

  * Close race between sort lookups and uncompleted sort setup in bctl

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 21 Sep 2011 19:36:33 +0400

eblob (0.12.2) unstable; urgency=low

  * Added eblob_gen_index util to generate index files from data blobs
  * Extended debug in eblob helpers

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 21 Sep 2011 15:03:37 +0400

eblob (0.12.1) unstable; urgency=low

  * Use temporary offsets when iterating over blobs.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 15 Sep 2011 03:15:09 +0400

eblob (0.12.0) unstable; urgency=low

  * Implemented append write.
  * Added iteration flags

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 13 Sep 2011 00:27:25 +0400

eblob (0.11.2) unstable; urgency=low

  * Do not lock eblob_commit_ram()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 09 Sep 2011 20:18:45 +0400

eblob (0.11.1) unstable; urgency=low

  * Fixed bug with on-disk index lookup
  * Added iterator in Python binding

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 06 Sep 2011 23:51:29 +0400

eblob (0.11.0) unstable; urgency=low

  * Get rid of unused config fields
  * Moved comparison function into include/eblob/blob.h
  * Initial error value in eblob_read_range_on_disk() should be 0
  * Added records_in_blob into cfg config which limits maximum number of
    records before blob is closed

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 31 Aug 2011 00:23:46 +0400

eblob (0.10.13) unstable; urgency=low

  * Use rb_prev() to iterate over tree in range request, since weRBtree is
    sorted in descending order
  * Set hash->rb_root to RB_ROOT prior its usage

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 30 Aug 2011 00:26:56 +0400

eblob (0.10.12) unstable; urgency=low

  * Added rbtree.h into library/Makefile.am
  * Revert "Always read eblob_disk_control from data_fd in
    eblob_fill_write_control_from_ram()"

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 28 Aug 2011 05:27:09 +0400

eblob (0.10.11) unstable; urgency=low

  * Always account for on-disk entries
  * Switched from hash table to rbtree to store keys

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 26 Aug 2011 00:40:28 +0400

eblob (0.10.10) unstable; urgency=low

  * Added EBLOB_TRY_OVERWRITE hash_flags flag. We try to overwrite data only
    when it is set or for EBLOB_TYPE_META writes
  * Always read eblob_disk_control from data_fd in
    eblob_fill_write_control_from_ram()
  * When updating index, put there wc->flags without BLOB_DISK_CTL_REMOVE set.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 23 Aug 2011 04:59:39 +0400

eblob (0.10.9) unstable; urgency=low

  * If sorted index size does not match unsorted, remove and regenerate sorted
    index.
  * Fixed write-control-back for compressed data.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 23 Aug 2011 04:06:38 +0400

eblob (0.10.8) unstable; urgency=low

  * Use eblob_iterate_control->thread_num to indicate threads exiting, for
    example when file iteration completes
  * Remove key from hash table, if it happend to point to removed entry
  * Added NOTICE debug about eblob_read() result: data/index fd, offset, size
    and so on
  * Added paranoidal check into eblob_read(), which checks that index read
    from disk is not marked as removed.
  * Added id search into eblob_index_info structure
  * Extended regex matched info

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 18 Aug 2011 18:56:23 +0400

eblob (0.10.7) unstable; urgency=low

  * workaround for old indexes, which did not set dc.disk_size

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 12 Aug 2011 23:15:45 +0400

eblob (0.10.6) unstable; urgency=low

  * Added extensive error debug for E2BIG error in
    eblob_fill_write_control_from_ram()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 12 Aug 2011 23:05:45 +0400

eblob (0.10.5) unstable; urgency=low

  * If eblob_fill_write_control_from_ram() read disk control from index and
    its data_size or disk_size are 0, reread it from data blob

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 12 Aug 2011 20:05:23 +0400

eblob (0.10.4) unstable; urgency=low

  * Update data header in overwrite
  * Read ctl from index when reading, since overwrite does not update data
    header

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 11 Aug 2011 23:35:36 +0400

eblob (0.10.3) unstable; urgency=low

  * Fixed nasty bug in alignment calculation, which may lead to unability to
    read data. Also need to copy write_control even in overwrite case

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 11 Aug 2011 04:30:14 +0400

eblob (0.10.2) unstable; urgency=low

  * Added BLOB_DISK_CTL_WRITE_RETURN flag, which specifies whether
    eblob_write_control should be copied back into data

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 11 Aug 2011 02:35:49 +0400

eblob (0.10.1) unstable; urgency=low

  * We should check key first, since second loop in eblob_find_on_disk()
    starts with different key
  * Propagate key into RAM if we read it from disk
  * Added eblob_regex_iter into bin_PROGRAMS
  * Added utility eblob_index_info
  * Added python binding

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 10 Aug 2011 23:12:55 +0400

eblob (0.10.0) unstable; urgency=low

  * Added stat support

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 10 Aug 2011 05:49:55 +0400

eblob (0.9.9) unstable; urgency=low

  * Unified on-disk search for exact match and non-removed entries
  * Generate sorted index for blobs which index is less than max index already
    found
  * Added index_size to stop iterator, if index grew under us

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 08 Aug 2011 23:34:32 +0400

eblob (0.9.8) unstable; urgency=low

  * eblob_hash_data() should use high bits untouched

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 06 Aug 2011 01:35:52 +0400

eblob (0.9.7) unstable; urgency=low

  * Get eblob_write_control from RAM only when all its fields are zeroes, so
    it is plain eblob_commit_write() call
  * Debug cleanups

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 05 Aug 2011 01:47:55 +0400

eblob (0.9.6) unstable; urgency=low

  * Do not send range replies for removed data and multiple times for objects,
    which are present on disk and in RAM

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 03 Aug 2011 21:11:53 +0400

eblob (0.9.5) unstable; urgency=low

  * Fixed old eblob iteration
  * Implemented on-disk range requests

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 02 Aug 2011 17:17:58 +0400

eblob (0.9.4) unstable; urgency=low

  * Fixed range requests (it does not iterate over on-disk index yet)
  * Mark existing index entry as removed in prepare hook

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 01 Aug 2011 21:58:11 +0400

eblob (0.9.3) unstable; urgency=low

  * We must check what bsearch() return and return error if needed.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 30 Jul 2011 01:20:56 +0400

eblob (0.9.2) unstable; urgency=low

  * When adding new column and reallocating bases we should sort base_ctls
  * Added local checksum calculation conde isntead of locked openssl

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 29 Jul 2011 23:56:49 +0400

eblob (0.9.1) unstable; urgency=low

  * configure.in udpate

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 27 Jul 2011 21:06:23 +0400

eblob (0.9.0) unstable; urgency=low

  * Export convenient prepare/commit helpers
  * Added write offsets
  * Do not remove old index
  * Search in both directions frm bsearch()-found entry when looking up key in
    on-disk sorted index
  * Refactor sorted generation code
  * Added paranoidal check about opening existing blobs for writing

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 27 Jul 2011 20:52:22 +0400

eblob (0.8.7) unstable; urgency=low

  * Create sorted indexes on startup. Use them instead of plain indexes.
  * Fixed eblob_realloc_base_type() invocation from eblob_add_new_base().
  * Fixed int overflow during lock allocation.
  * Initialize log_file_ only when we setup log_file string.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 22 Jul 2011 01:46:58 +0400

eblob (0.8.6) unstable; urgency=low

  * Log cleanups
  * Added ability to overwrite data in place
  * Fixed race between object removal and sorted index generation (not
    completely yet)

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 19 Jul 2011 22:41:18 +0400

eblob (0.8.5) unstable; urgency=low

  * Use /dev/stdout as default log file if NULL was provided in constructor
  * Implemented on-disk index
  * Added boost::regex check and compile regex iterator if it is present

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 19 Jul 2011 02:00:09 +0400

eblob (0.8.4) unstable; urgency=low

  * Added thread num param to iterator_callbacks structure

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 15 Jul 2011 19:07:40 +0400

eblob (0.8.3) unstable; urgency=low

  * Only run automatic defrag if enabled. Disabled by default.
  * Force ascending index sorting at blob loading time

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 14 Jul 2011 02:04:47 +0400

eblob (0.8.2) unstable; urgency=low

  * Use single defragmentation iterator
  * More debug

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 13 Jul 2011 21:54:36 +0400

eblob (0.8.1) unstable; urgency=low

  * If data was not compressed, but BLOB_DISK_CTL_COMPRESS flag was set,
    return data as is and clear flag
  * Do not mark the same entry as removed twice

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 13 Jul 2011 20:35:42 +0400

eblob (0.8.0) unstable; urgency=low

  * Added more checks for malformed entries. Recover index if possible.
  * Added eblob_remove_blobs(), which removes all blobs from disk. Root is
    requred to get path through /ptoc/self/fd
  * Allow eblob(struct eblob_config *cfg) constructor only, i.e. with logger
    set by caller.
  * Added automatic defragmentation

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 08 Jul 2011 03:05:26 +0400

eblob (0.7.0) unstable; urgency=low

  * Get rid of mapped file as in-memory index
  * Extended iterator interface
  * Added C++ cleanup_blobs() empty method

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 05 Jul 2011 22:01:29 +0400

eblob (0.6.1) unstable; urgency=low

  * Disable memory index in mmap file

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 03 Jul 2011 02:03:48 +0400

eblob (0.6.0) unstable; urgency=low

  * Added snappy compression support.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 29 Jun 2011 03:53:56 +0400

eblob (0.5.2) unstable; urgency=low

  * Added start/max types into iterator. Exoport nice interface outside.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 28 Jun 2011 01:32:38 +0400

eblob (0.5.1) unstable; urgency=low

  * Create new files, if eblob dir is empty

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 25 Jun 2011 03:38:43 +0400

eblob (0.5.0) unstable; urgency=low

  * Added multiple columns support

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 25 Jun 2011 03:05:16 +0400

eblob (0.4.4) unstable; urgency=low

  * Added eblob_remove_hashed() and eblob::remove_hashed()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 22 Jun 2011 20:27:12 +0400

eblob (0.4.3) unstable; urgency=low

  * Return real data offset, do not force clients to mess with sizeof(struct
    eblob_disk_control)

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 21 Jun 2011 02:45:45 +0400

eblob (0.4.2) unstable; urgency=low

  * Added hashed keys
  * Renames write methods

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 19 Jun 2011 01:52:10 +0400

eblob (0.4.1) unstable; urgency=low

  * Switched to fixed-size eblob_key interface

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 18 Jun 2011 00:33:48 +0400

eblob (0.4.0) unstable; urgency=low

  * Added examples
  * Added namespace zbr
  * Do not iterate if file size is zero

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 17 Jun 2011 21:16:06 +0400

eblob (0.3.14) unstable; urgency=low

  * Added eblob range query
  * Added remove() method
  * Added c++ examples

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 16 Jun 2011 21:28:55 +0400

eblob (0.3.13) unstable; urgency=low

  * Overwrite hash entry if we asked to replace it and sizes match
  * Use (part of) provided key as hash table index
  * Preallocate more space for hash entries in a bucket
  * Save references to open data/index failes in iterator
  * Initial implementation of startup defragmentation
  * Extended eblob_iterator class to support index and data iterators

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 07 Jun 2011 12:03:49 +0400

eblob (0.3.12) unstable; urgency=low

  * Use the same mmap file for subsequent starts by default
  * Grow and start map file by 1 Gb

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 03 Jun 2011 07:27:19 +0400

eblob (0.3.11) unstable; urgency=low

  * Do not move entries around, since we are closing down whole mapping anyway
  * Use posix_fallocate() to preallocate sufficiently large mmap files
  * Added completion callback and matched callback counters into iterator
  * Allocate/free mmap_file and use eblob file by default as a base path for
    mmap file
  * truncate map file to 0 at cleanup

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 02 Jun 2011 07:24:06 +0400

eblob (0.3.10) unstable; urgency=low

  * Remap new portions of backend allocation file at different locations.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 01 Jun 2011 10:52:25 +0400

eblob (0.3.9) unstable; urgency=low

  * Do not unmap map_base prior new map

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 01 Jun 2011 09:18:29 +0400

eblob (0.3.8) unstable; urgency=low

  * Use mmap(MAP_FIXED)

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 01 Jun 2011 09:03:39 +0400

eblob (0.3.7) unstable; urgency=low

  * Use mremap(MREMAP_FIXED | MREMAP_MAYMOVE)

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 01 Jun 2011 08:51:53 +0400

eblob (0.3.6) unstable; urgency=low

  * Use munmap/mmap instead of mremap, sine the former may fail miserably

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 01 Jun 2011 08:39:41 +0400

eblob (0.3.5) unstable; urgency=low

  * Fixed ostringstream and its std::string dereference

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 01 Jun 2011 08:26:21 +0400

eblob (0.3.4) unstable; urgency=low

  * Added read methods
  * Use ostringstream for mmap file name

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 01 Jun 2011 07:21:55 +0400

eblob (0.3.3) unstable; urgency=low

  * Added cpp bindings

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 01 Jun 2011 06:31:19 +0400

eblob (0.3.2) unstable; urgency=low

  * Added library version numbers

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 31 May 2011 13:29:03 +0400

eblob (0.3.1) unstable; urgency=low

  * Fixed shlibs generation

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 31 May 2011 13:02:16 +0400

eblob (0.3.0) unstable; urgency=low

  * Use mmapped file as a base for all hash entries allocations
  * Added version into debian's dh_makeshlibs
  * Moved from linked lists into arrays in eblob hash table
  * Made eblob prepare/commit more thread friendly

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 31 May 2011 09:41:19 +0400

eblob (0.2.0) unstable; urgency=low

  * Export eblob_read_file_index() which returns blob index as well as fd,
    size and offset for given record.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 14 May 2011 00:38:31 +0400

eblob (0.1.7) unstable; urgency=low

  * Log level cleanups

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 01 Mar 2011 00:03:53 +0300

eblob (0.1.6) unstable; urgency=low

  * Correctly set index's disk_size to sizeof(struct eblob_disk_control)

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 28 Feb 2011 23:49:38 +0300

eblob (0.1.5) unstable; urgency=low

  * Allocate a bit more space for filename to include .index suffix.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 28 Feb 2011 23:09:19 +0300

eblob (0.1.4) unstable; urgency=low

  * Implemented run-time index generation and fixed defragmented offsets.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 15 Feb 2011 03:05:10 +0300

eblob (0.1.3) unstable; urgency=low

  * Do not lock entries in eblob_hash_insert_raw() since they should be locked
    via mlockall().

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 08 Feb 2011 02:38:28 +0300

eblob (0.1.2) unstable; urgency=low

  * Set memory locking limits to infinity if EBLOB_HASH_MLOCK is set in
    config.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 08 Feb 2011 02:31:33 +0300

eblob (0.1.1) unstable; urgency=low

  * Use mlockall(MCL_CURRENT | MCL_FUTURE) to lock all current and future
    allocations when EBLOB_HASH_MLOCK is set.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 08 Feb 2011 02:22:36 +0300

eblob (0.1.0) unstable; urgency=low

  * Switched to sha512 and 64-byte IDs

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 29 Nov 2010 23:43:56 +0300

eblob (0.0.1) unstable; urgency=low

  * libeblob is a low-level IO library which stores data in huge blob files appending records one after another.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 28 Jul 2010 20:09:20 +0400
